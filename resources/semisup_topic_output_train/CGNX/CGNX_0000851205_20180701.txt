periods ended July 1, 2018 and July 2, 2017 were $32,991,000 and $72,451,000, respectively. The total fair values of stock options vested for the three-month periods ended July 1, 2018 and July 2, 2017 were $887,000 and $725,000, respectively. The total fair values of stock options vested for the six-month periods ended July 1, 2018 and July 2, 2017 were $26,560,000 and $18,713,000, respectively. 
The total stock-based compensation expense and the related income tax benefit recognized for the three-month period ended July 1, 2018 were $9,002,000 and $1,607,000, respectively, and for the three-month period ended July 2, 2017 were $7,846,000 and $2,583,000, respectively. The total stock-based compensation expense and the related income tax benefit recognized for the six-month period ended July 1, 2018 were $22,196,000 and $3,954,000, respectively, and for the six-month period ended July 2, 2017 were $15,329,000 and $5,022,000, respectively. No compensation expense was capitalized as of July 1, 2018 or December 31, 2017.
The excess tax benefit arising from the difference between the deduction for tax purposes and the compensation cost recognized for financial reporting purposes from stock option exercises resulted in a decrease of the effective tax rate by 1 and 9 percentage points for the three-month periods ended July 1, 2018 and July 2, 2017, respectively, and a decrease of the effective tax rate by 5 and 19 percentage points for the six-month periods ended July 1, 2018 and July 2, 2017, respectively. 
The Company recorded gross realized gains and gross realized losses on the sale of debt securities totaling $308,000 and $61,000, respectively, during the three-month period ended July 1, 2018 and $55,000 and $13,000, respectively, during the three-month period ended July 2, 2017. The Company recorded gross realized gains and gross realized losses on the sale of debt securities totaling $363,000 and $94,000, respectively, during the six-month period ended July 1, 2018 and $143,000 and $36,000, respectively, during the six-month period ended July 2, 2017. These gains and losses are included in "Investment income" on the Consolidated Statement of Operations. Prior to the sale of these securities, unrealized gains and losses for these debt securities, net of tax, are recorded in shareholders’ equity as accumulated other comprehensive income (loss).
The total intrinsic values of stock options exercised for the three-month periods ended July 1, 2018 and July 2, 2017 were $4,902,000 and $19,408,000, respectively. The total intrinsic values of stock options exercised for the six-month 
The weighted-average grant-date fair values of stock options granted during the three-month periods ended July 1, 2018 and July 2, 2017 were $21.63 and $15.51, respectively. The weighted-average grant-date fair values of stock options granted during the six-month periods ended July 1, 2018 and July 2, 2017 were $21.62 and $14.98, respectively. 
Shipping and handling activities for which the Company is responsible under the terms and conditions of the sale are not accounted for as performance obligations but as fulfillment costs. These activities are required to fulfill the Company’s promise to transfer the goods and are expensed when revenue is recognized.
The Company identifies performance obligations as promises in contracts to transfer distinct goods or services. Standard products and services that the Company regularly sells separately are accounted for as distinct performance obligations. Application-specific customer solutions that are comprised of a combination of products and services are accounted for as one performance obligation to deliver a total solution to the customer. On-site support services that are provided to the customer after the solution is deployed are accounted for as a separate performance obligation. These solutions are provided to customers in a variety of industries, including the consumer electronics, logistics, and automotive industries. 
The Company recognizes revenue when it transfers the promised goods or services to the customer. Revenue for standard products is recognized at the point in time when the customer obtains control of the goods, which is typically upon delivery when the customer has legal title, physical possession, the risks and rewards of ownership, and an enforceable obligation to pay for the products. Revenue for services, which are not material, is typically recognized over the time the service is provided. 
During the six-month period ended July 1, 2018, the Company recorded a $879,000 increase in reserves for income taxes, net of deferred tax benefit. Estimated interest and penalties included in these amounts totaled $136,000 for the six-month period ended July 1, 2018.
Revenue for application-specific customer solutions is recognized at the point in time when the solution is validated, which is the point in time when the Company can objectively determine that the agreed-upon specifications in the contract have been met and the customer will accept the performance obligations in the arrangement. Although the customer may have taken legal title and physical possession of the goods when they arrived at the customer’s designated site, the significant risks and rewards of ownership transfer to the customer only upon validation. Revenue for on-site support services related to these solutions is recognized over the time the service is provided. 
The Company identifies contracts with customers as agreements that create enforceable rights and obligations, which typically take the form of customer contracts or purchase orders. 
Accounts receivable represent amounts billed and currently due from customers which are reported at their net estimated realizable value. The Company maintains reserves against its accounts receivable for potential credit losses. Credit losses recognized on accounts receivable were immaterial for the three-month and six-month periods ended July 1, 2018 and July 2, 2017, respectively. Contract assets consist of unbilled revenue which arises when revenue is recognized in advance of billing for certain application-specific customer solutions contracts. Contract liabilities consist of deferred revenue and customer deposits which arise when amounts are billed to or collected from customers in advance of revenue recognition.Revenue for the second quarter of 2018 totaled $211,264,000, representing an increase of 19% from the second quarter of 2017 driven primarily by strong sales in the logistics and automotive industries. The gross margin percentage 
The Company believes that its existing cash and investment balances, together with cash flow from operations, will be sufficient to meet its operating, investing, and financing activities for the next twelve months. As of July 1, 2018, the Company had $754,883,000 in cash and investments. In addition, Cognex has no long-term debt and does not anticipate needing debt financing in the near future. We believe that our strong cash position has put us in a relatively good position with respect to our longer-term liquidity needs.
Investment income increased by $1,421,000, or 66%, for the three-month period and increased by $2,649,000, or 64%, for the six-month period. The increase was due to higher yields on the Company's portfolio of debt securities, as well as additional funds available for investment.
The Company's gross margin percentage has ranged in the mid 70s for the past several years. As of the date of this report, we expect the gross margin percentage to be relatively flat for the third quarter of 2018 as compared to the second quarter of 2018.
Gross margin as a percentage of revenue was 74% and 75% for the three-month and six-month periods in 2018, respectively, compared to 76% for both periods in 2017. Although a higher volume of products sold resulted in manufacturing efficiencies, this favorable impact was offset by a greater percentage of revenue related to application-specific customer solutions. These solutions typically have lower gross margins due to the application configuration and deployment services included as part of the solution, as well as on-site support services provided after the solution is deployed. In addition, these solutions are often provided to large customers that may receive favorable pricing.None.